<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MTG Proxy Generator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="description" content="Generate printable Magic: The Gathering proxies with a clean, mobile-first UI." />

  <style>
    @page {
      size: Letter;
      margin: 0.25in;
    }
    /* Print-only styles */
    @media print {
      body * { visibility: hidden; }
      #printable, #printable * { visibility: visible; }
      #printable { position: absolute; inset: 0; margin: 0; padding: 0; }
      .print-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 0.12in; /* Slightly larger for crop-mark clearance */
        padding: 0.05in;
      }
      .print-card {
        width: 2.5in;
        height: 3.5in;
        position: relative;
        background: #fff;
      }
      .print-card img {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      /* Crop marks: 0.125in lines at corners */
      .print-card::before,
      .print-card::after {
        content: "";
        position: absolute;
        width: 0.125in;
        height: 0.125in;
        pointer-events: none;
        background: transparent;
        box-shadow:
          /* top-left horizontal */  -0.125in 0 0 0 #000,
          /* top-left vertical   */   0 -0.125in 0 0 #000,
          /* top-right horizontal*/   2.625in 0 0 0 #000,
          /* top-right vertical  */   2.5in -0.125in 0 0 #000,
          /* bottom-left horizontal*/ -0.125in 3.5in 0 0 #000,
          /* bottom-left vertical  */  0 3.625in 0 0 #000,
          /* bottom-right horizontal*/ 2.625in 3.5in 0 0 #000,
          /* bottom-right vertical  */  2.5in 3.625in 0 0 #000;
      }
      .print-card::after { display: none; } /* keep single shadow set */
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
</head>
<body class="bg-slate-50 text-slate-900">
  <header class="sticky top-0 z-10 bg-white/90 backdrop-blur border-b border-slate-200">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <h1 class="text-lg font-bold tracking-tight">MTG Proxy Generator</h1>
      <a href="https://github.com/" class="text-sm text-slate-600 hover:text-slate-900">GitHub</a>
    </div>
  </header>

  <main class="max-w-6xl mx-auto p-4">
    <section class="mb-6">
      <h2 class="text-xl font-semibold mb-2">Create Proxies</h2>
      <p class="text-slate-600 text-sm">Search cards from Scryfall, select artwork, and print a 3×3 sheet with crop marks.</p>
    </section>

    <section class="bg-white rounded-2xl shadow-sm border border-slate-200 p-4 md:p-6">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div>
          <label class="block text-sm font-medium mb-1" for="cardName">Card Name</label>
          <input id="cardName" class="w-full rounded-xl border-slate-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="e.g., Lightning Bolt" />
        </div>
        <div>
          <label class="block text-sm font-medium mb-1" for="setCode">Set Code (optional)</label>
          <input id="setCode" class="w-full rounded-xl border-slate-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="e.g., MPS, BLB" />
        </div>
        <div class="flex items-end gap-2">
          <button id="searchBtn" class="w-full inline-flex justify-center rounded-xl bg-indigo-600 text-white px-4 py-2 font-semibold hover:bg-indigo-700 transition-colors">Search</button>
        </div>
      </div>

      <div class="mt-4 flex flex-wrap items-center gap-2 text-xs text-slate-600">
        <span>Tips: Use full names for better results. Set codes are 2–5 letters (e.g., <code>BLB</code>).</span>
      </div>

      <div id="status" class="mt-4 text-sm text-slate-600"></div>

      <div id="results" class="mt-6 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3"></div>

      <div class="mt-6 flex flex-wrap gap-3">
        <button id="addToSheet" class="rounded-xl border border-slate-300 px-4 py-2 text-sm font-semibold hover:border-indigo-400 hover:text-indigo-600">Add Selected</button>
        <button id="clearSheet" class="rounded-xl border border-slate-300 px-4 py-2 text-sm font-semibold hover:border-rose-400 hover:text-rose-600">Clear Sheet</button>
        <button id="saveSheet" class="rounded-xl border border-slate-300 px-4 py-2 text-sm font-semibold hover:border-emerald-400 hover:text-emerald-600">Save Sheet</button>
        <button id="loadSheet" class="rounded-xl border border-slate-300 px-4 py-2 text-sm font-semibold hover:border-indigo-400 hover:text-indigo-600">Load Sheet</button>
        <button id="downloadPng" class="rounded-xl border border-slate-300 px-4 py-2 text-sm font-semibold hover:border-indigo-400 hover:text-indigo-600">Download PNG</button>
<button id="downloadPdf" class="rounded-xl border border-slate-300 px-4 py-2 text-sm font-semibold hover:border-indigo-400 hover:text-indigo-600">Download PDF</button>
<button id="printSheet" class="rounded-xl bg-emerald-600 text-white px-4 py-2 text-sm font-semibold hover:bg-emerald-700">Print</button>
      </div>
    </section>

    <section class="mt-6">
      <div class="flex items-center justify-between mb-2">
        <h3 class="text-lg font-semibold">Sheet Preview</h3>
        <span class="text-xs text-slate-500">Target: 9 cards (3×3)</span>
      </div>
      <div id="sheet" class="bg-white rounded-xl border border-dashed border-slate-300 p-4 grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 min-h-[200px]"></div>
    </section>
  </main>

  <footer class="max-w-6xl mx-auto px-4 py-8 text-center text-xs text-slate-500">
    © 2025 MTG Proxy Generator • For personal use only. Not for sale.
  </footer>

  <div id="printable" class="hidden">
    <div id="printGrid" class="print-grid"></div>
  </div>

  <script src="./main.js"></script>
</body>
</html>
